/*! @iflix/scrollwatch v1.2.2 | (c) Tue Apr 18 2017 11:31:34 GMT+1000 (AEST) Evan Dull <evandull@gmail.com>, iflix | License: MIT | https://github.com/iflix-letsplay/ScrollWatch.git*/
!function(t,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?module.exports=i():t.ScrollWatch=i()}(this,function(){"use strict";var t=0,i={},n={container:window.document.documentElement,watch:"[data-scroll-watch]",watchOnce:!0,inViewClass:"scroll-watch-in-view",ignoreClass:"scroll-watch-ignore",debounce:!1,debounceTriggerLeading:!1,scrollDebounce:250,resizeDebounce:250,scrollThrottle:250,resizeThrottle:250,watchOffset:0,infiniteScroll:!1,infiniteOffset:0,onElementInView:function(){},onElementOutOfView:function(){},onInfiniteXInView:function(){},onInfiniteYInView:function(){}},e="scrollwatchinit",l=function(t){var i,n,e,l=arguments.length;for(t=t||{},i=1;i<l;i++)if(e=arguments[i])for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},s=function(t,i,n){var e,l;return i=i||250,function(){var s=n||this,o=+new Date,c=arguments;e&&o<e+i?(window.clearTimeout(l),l=setTimeout(function(){e=o,t.apply(s,c)},i)):(e=o,t.apply(s,c))}},o=function(t,i,n){var e,l,s,o,c,r=function(){var a=(new Date).getTime()-o;a<i&&a>=0?e=setTimeout(r,i-a):(e=null,n||(c=t.apply(s,l),e||(s=l=null)))};return function(){var a=n&&!e;return s=this,l=arguments,o=(new Date).getTime(),e||(e=setTimeout(r,i)),a&&(c=t.apply(s,l),s=l=null),c}},c=function(){S.call(this)||(i[this._id].config.container=document.querySelector(i[this._id].config.container))},r=function(){i[this._id].elements=Array.prototype.slice.call(document.querySelectorAll(i[this._id].config.watch+":not(."+i[this._id].config.ignoreClass+")"))},a=function(){i[this._id].lastScrollPosition=p.call(this)},f=function(t){i[this._id]&&(h.call(this,t),i[this._id]&&(d.call(this,t),i[this._id]&&t!==e&&a.call(this)))},h=function(t){var n,e,l=i[this._id],s=l.elements.length,o=l.config,c=o.inViewClass,r={eventType:t};for(e=0;e<s;e++)n=l.elements[e],r.el=n,"scroll"===t&&(r.direction=_.call(this,m.call(this))),z.call(this,n)?n.classList.contains(c)||(n.classList.add(c),o.onElementInView.call(this,r),o.watchOnce&&(l.elements.splice(e,1),s--,e--,n.classList.add(o.ignoreClass))):n.classList.contains(c)&&(n.classList.remove(c),o.onElementOutOfView.call(this,r))},d=function(t){var n,l,s,o,c,r,a,f=i[this._id],h=f.config;if(h.infiniteScroll&&!f.isInfiniteScrollPaused)for(l=["x","y"],r=["onInfiniteXInView","onInfiniteYInView"],s=h.container,o=v.call(this),c=[s.scrollWidth,s.scrollHeight],a={},n=0;n<2;n++)("scroll"===t&&b.call(this,l[n])||"resize"===t||"refresh"===t||t===e)&&o[l[n]].end+h.infiniteOffset>=c[n]&&(a.eventType=t,"scroll"===t&&(a.direction=_.call(this,l[n])),h[r[n]].call(this,a))},u=function(){var t=i[this._id],n=y.call(this);n.addEventListener("scroll",t.scrollHandler,!1),n.addEventListener("resize",t.resizeHandler,!1)},g=function(){var t=i[this._id],n=y.call(this);n.removeEventListener("scroll",t.scrollHandler),n.removeEventListener("resize",t.resizeHandler)},y=function(){return S.call(this)?window:i[this._id].config.container},w=function(){var t={w:i[this._id].config.container.clientWidth,h:i[this._id].config.container.clientHeight};return t},p=function(){var t,n={};return S.call(this)?(n.left=window.pageXOffset,n.top=window.pageYOffset):(t=i[this._id].config.container,n.left=t.scrollLeft,n.top=t.scrollTop),n},v=function(){var t={x:{},y:{}},i=p.call(this),n=w.call(this);return t.x.start=i.left,t.x.end=t.x.start+n.w,t.x.size=t.x.end-t.x.start,t.y.start=i.top,t.y.end=t.y.start+n.h,t.y.size=t.y.end-t.y.start,t},x=function(t){var n,e={x:{},y:{}},l=v.call(this),s=t.getBoundingClientRect();return S.call(this)?(e.x.start=s.left+l.x.start,e.x.end=s.right+l.x.start,e.y.start=s.top+l.y.start,e.y.end=s.bottom+l.y.start):(n=i[this._id].config.container.getBoundingClientRect(),e.x.start=s.left-n.left+l.x.start,e.x.end=e.x.start+s.width,e.y.start=s.top-n.top+l.y.start,e.y.end=e.y.start+s.height),e.x.size=e.x.end-e.x.start,e.y.size=e.y.end-e.y.start,e},m=function(){return b.call(this,"x")?"x":b.call(this,"y")?"y":void 0},_=function(t){var n={x:["right","left"],y:["down","up"]},e={x:"left",y:"top"},l=i[this._id].lastScrollPosition,s=p.call(this);return s[e[t]]>l[e[t]]?n[t][0]:n[t][1]},b=function(t){var n={x:"left",y:"top"},e=i[this._id].lastScrollPosition,l=p.call(this);return l[n[t]]!==e[n[t]]},z=function(t){var n=v.call(this),e=x.call(this,t),l=i[this._id].config.watchOffset;return I(e,n,l)&&T(e,n,l)},I=function(t,i,n){return t.y.start<i.y.end+n&&t.y.end>i.y.start-n},T=function(t,i,n){return t.x.start<i.x.end+n&&t.x.end>i.x.start-n},S=function(){return i[this._id].config.container===window.document.documentElement},O=function(t){l(i[this._id].config,n,t)},L=function(t){if(i[this._id]){var n=t.type;("resize"===n||b.call(this,"x")||b.call(this,"y"))&&f.call(this,n)}},E=function(n){if(!(this instanceof E))return new E(n);var l;Object.defineProperty(this,"_id",{value:t++}),l=i[this._id]={config:{},elements:[],lastScrollPosition:{top:0,left:0},isInfiniteScrollPaused:!1},O.call(this,n),l.config.debounce?(l.scrollHandler=o(L.bind(this),l.config.scrollDebounce,l.config.debounceTriggerLeading),l.resizeHandler=o(L.bind(this),l.config.resizeDebounce,l.config.debounceTriggerLeading)):(l.scrollHandler=s(L.bind(this),l.config.scrollThrottle,this),l.resizeHandler=s(L.bind(this),l.config.resizeThrottle,this)),c.call(this),u.call(this),r.call(this),f.call(this,e)};return E.prototype={refresh:function(){r.call(this),f.call(this,"refresh")},destroy:function(){g.call(this),delete i[this._id]},pauseInfiniteScroll:function(){i[this._id].isInfiniteScrollPaused=!0},resumeInfiniteScroll:function(){i[this._id].isInfiniteScrollPaused=!1}},E});
//# sourceMappingURL=ScrollWatch-1.2.2.min.js.map
